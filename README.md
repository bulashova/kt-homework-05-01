# Домашнее задание к занятию «2.2. ООП: объекты и классы»

Нужно сделать все задачи в **одном** репозитории.

## Задача №1. Посты

На этом этапе мы будем не только решать вычислительные задачи, но и моделировать системы.

В качестве примера возьмём ВКонтакте: https://vk.com/dev/objects/post. Если страница недоступна, воспользуйтесь [копией](assets/post.pdf) из каталога [assets](assets)).

### На что нужно обратить внимание
1. В Kotlin используется `camelCase` для полей.
1. Некоторые поля помечены как `integer [0, 1]`, хотя по логике должны быть `Boolean` (у вас должны быть `Boolean`).
1. Добавьте из перечисленных в документации около 10 полей простых типов (Int, String, Boolean).
1. Поля типа `object` должны быть описаны отдельными классами (класс в Kotlin в документации VK называют object). Добавьте хотя бы одно такое поле (например, `comments` или `likes`).
1. Для полей вы можете добавлять значения по умолчанию, аналогично параметрам функций. При таком подходе вам не нужно будет указывать значения всех аргументов при создании объектов класса.

Что мы хотим получить:
1. Data-класс `Post` (и другие классы, которые могут быть вложены в `Post`).
1. Объект `WallService`, который хранит посты в массиве.

## Задача №2. Wall

Теперь нужно разобраться с функциональностью сервиса, отвечающего за стены пользователей: https://vk.com/dev/wall ([копия](assets/wall.pdf)).

Нас будут интересовать следующие методы:
* создание записи;
* обновление записи.

### Создание записи

Как он должен работать:
1. добавлять запись в массив, но при этом назначать посту уникальный среди всех постов идентификатор;
2. возвращать пост с уже выставленным идентификатором.

<details>
  <summary>Подсказка</summary>

  Возможно, вам стоит завести private-переменную для хранения следующего уникального `id`. Пока у нас in-memory система: всё хранится в оперативной памяти, всё работает на одной машине.
</details>

### Обновление записи

Как он должен работать:
1. находить среди всех постов запись с тем же `id`, что и у `post` и обновлять все свойства;
2. если пост с таким `id` не найден, то ничего не происходит и возвращается `false`, в противном случае – возвращается `true`.

## Задача №3. Wall Tests

Следующая задача – написать автотесты на ваши методы:
* на `add` – всего один, который проверяет, что после добавления поста `id` стал отличным от 0.
* на `update` – целых два:
    - изменяем пост с существующим `id`, возвращается `true`;
    - изменяем пост с несуществующим `id`, возвращается `false`.

### Итог
1. У вас должен быть репозиторий на GitHub, в котором будет ваш Gradle-проект.
1. К репозиторию должен быть подключён GitHub Actions.
1. Сборка должна быть «зелёной» — ваши тесты должны проходить.                                                               
# Домашнее задание к занятию «2.3. ООП: композиция, наследование и интерфейсы»

## Задача №1. Посты (без Attachments)

Доработайте первую задачу из предыдущей лекции так, чтобы ваша система отображала все поля объекта (кроме `attachments`), описанного в документации.
Сделайте некоторые из полей `Nullable` (на ваш выбор).  

Если вам не доступен ВКонтакте, вы можете воспользоваться сохранённой версией из каталога [assets](assets)

### Итог
1. Data-класс `Post`.
1. Внутри `Post` могут быть `Nullable`-свойства.
1. `WallService`, который хранит посты в массиве. 

Вы можете оформить это как Pull Request к предыдущему проекту (присылайте в личном кабинете ссылку на PR).

**Важно**: после обновлений `WallService` должна оставаться функциональной. Автотесты должны проходить.

[**Ссылка на решение: Pull Request kt-homework-06-01**](https://github.com/bulashova/kt-homework-05-01/pull/1)


## Задача №2. Attachments

Следующая задача: разобраться с `attachments` ([прямая ссылка](https://vk.com/dev/objects/attachments_w)/[сохранённая копия](assets/attachments.pdf)).

У вас в массиве могут храниться разные объекты.

ВКонтакте их хранит вот так: 

```json
{
    "attachments": [
      {
        "type": "photo",
        "photo": {
            "id": 1,
            "owner_id": 1,
            "photo_130": "https://vk.com/some_photo_link",
            "photo_604": "https://vk.com/another_photo_link"
        }
      }, {
        "type": "video",
        "video": {
            "id": 1,
            "owner_id": 1,
            "title": "A Funny Video",
            "duration": 30
        }
      }
    ]
}
```

Формат называется JSON, с ним мы будем знакомиться позднее. В примере описано, что есть массив `attachments`, в котором лежат объекты (назовём их тип  `Attachment`). В объектах массива есть поле `type`, а второе поле может быть различным (оно определяется на базе значения поля `type`: в первом случае `Photo`, во втором —`Video`). Для организации подобной структуры будет удобно применить наследование.

Возможны два варианта:
* сделать `Attachment` интерфейсом,
* сделать `Attachment` абстрактным классом.

В обоих вариантах нужно добавить в `Attachment` поле `type`, а после описать наследников Attachment, которые уже будут хранить специфичные данные (фото, аудио, видео). Эти данные (то, что вложено в наследников `Attachment`) лучше оформить в виде отдельных классов - `Audio`, `Video` и так далее. Т.е. для одного типа вложения будут отдельные классы: `AudioAttachment` и `Audio`. Не забывайте, что в Kotlin не обязательно каждый класс описывать в отдельном файле, а можно в одном описать сразу несколько, что будет особенно удобно в этой задаче.

Вам необходимо добавить к классу Post массив из объектов `Attachment` и описать классы `Attachment`, его наследников и классы для хранения данных о вложениях.

Поскольку типов вложений очень много, вам достаточно выбрать для реализации любые 5. Содержимое вложений можно посмотреть в [документации](https://vk.com/dev/objects/attachments_w) или в сохраненных копиях в каталоге [assets](assets).

Вы можете оформить это как Pull Request к задаче №1 (присылайте ссылку в личном кабинете на PR).

**Важно**: после ваших обновлений `WallService` должна оставаться функциональной. Т.е. автотесты должны проходить.

[**Ссылка на решение: Pull Request kt-homework-06-02**](https://github.com/bulashova/kt-homework-05-01/pull/2)

## Задача №3. Sealed-классы*

**Важно**: это не обязательная задача. Её выполнение не влияет на получение зачёта по ДЗ.

В Kotlin предыдущую задачу можно решить с помощью [запечатанных (sealed) классов](https://kotlinlang.org/docs/reference/sealed-classes.html).

Вы можете определить фиксированную иерархию типов (количество типов вложений у вас фиксировано).

Тогда в выражениях типа `when` вам не придётся писать `else`.

Нужно почитать [документацию](https://kotlinlang.org/docs/reference/sealed-classes.html) и сделать Pull Request с реализацией на базе sealed-классов (вы можете подглядеть подсказку).

<details>
<summary>Подсказка</summary>

Не забывайте, что у всех наследников есть общее поле `type`. Для sealed-классов возможна следующая реализация:
```kotlin
sealed class Attachment(val type: String)

data class VideoAttachment(val video: Video) : Attachment("video")

fun main() {
    val attachment: Attachment = VideoAttachment("stuff")
    println(attachment.type)
}
```
</details>

Вы можете оформить это как Pull Request к задаче №1. Присылайте ссылку в личном кабинете на PR.

**Важно**: после ваших обновлений `WallService` должна оставаться функциональной,т.е. автотесты должны проходить.

[**Ссылка на решение: Pull Request kt-homework-06-03**](https://github.com/bulashova/kt-homework-05-01/pull/3)